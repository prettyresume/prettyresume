<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">        
        <script src="oauth.js"></script>
        <title>Main Page</title>
    </head>
    <body>
        <h1 id="welcome_msg"></h1>
        <script language="javascript">

            window.onload = function() {
                loginGithub();
            };

            function loginGithub() {
                OAuth.initialize('KtHQPnf0Xywefg8q_uZHuMAmQgg')
                OAuth.popup('github')
                    .done(function(result) {
                        result.me()                        
                        .done(function(response){
                            console.log(result)
                            console.log(response) 
                            document.getElementById('welcome_msg').innerHTML = "Welcome " + response.name;
                        })
                        .fail(function(err){
                           alert('Could not fetch user details') 
                           document.getElementById('welcome_msg').innerHTML = "Could not fetch user details";
                        })
                    })
                    .fail(function(err){
                        alert('Could not authenticate on the github server')
                        document.getElementById('welcome_msg').innerHTML = "Could not authenticate on the github server";
                    })
            }
        </script>
    </body>
</html>